enable: true
application: "com.xingin.xhs"
version: "N/A"
user: 0
runtime: "v8"
script:  !!binary "ZnVuY3Rpb24gaG9va19kbG9wZW4oc29OYW1lID0gJycpIHsKICAgIEludGVyY2VwdG9yLmF0dGFjaChNb2R1bGUuZmluZEV4cG9ydEJ5TmFtZShudWxsLCAiYW5kcm9pZF9kbG9wZW5fZXh0IiksIHsKICAgICAgICBvbkVudGVyOiBmdW5jdGlvbiAoYXJncykgewogICAgICAgICAgICB2YXIgcGF0aHB0ciA9IGFyZ3NbMF07CiAgICAgICAgICAgIGlmIChwYXRocHRyICE9PSB1bmRlZmluZWQgJiYgcGF0aHB0ciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHB0cihwYXRocHRyKS5yZWFkQ1N0cmluZygpOwogICAgICAgICAgICAgICAgaWYgKHBhdGguaW5kZXhPZignbGlibXNhb2FpZHNlYy5zbycpID49IDApIHsKICAgICAgICAgICAgICAgICAgICBwdHIocGF0aHB0cikud3JpdGVVdGY4U3RyaW5nKCIiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdwYXRoOiAnLHBhdGgpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfQoKZnVuY3Rpb24gc3RyaW5nVG9CeXRlQXJyYXkoc3RyKSB7CiAgICB2YXIgU3RyaW5nQ2xhc3MgPSBKYXZhLnVzZSgnamF2YS5sYW5nLlN0cmluZycpOwogICAgdmFyIGphdmFTdHJpbmcgPSBTdHJpbmdDbGFzcy4kbmV3KHN0cik7CiAgICByZXR1cm4gamF2YVN0cmluZy5nZXRCeXRlcygpOwp9Cgpob29rX2Rsb3BlbigpCnZhciBmbGFnID0gdHJ1ZQpzZXRUaW1lb3V0KCgpID0+IHsKCiAgICBKYXZhLmVudW1lcmF0ZUNsYXNzTG9hZGVycyh7CiAgICAgICAgb25NYXRjaDogZnVuY3Rpb24gKGxvYWRlcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy9leGl0Y29uc29sZS5sb2cobG9hZGVyKQogICAgICAgICAgICAgICAgaWYgKGZsYWcgJiYgbG9hZGVyLmZpbmRDbGFzcygiaXM5LmIiKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGb3VuZCEiKQogICAgICAgICAgICAgICAgICAgIEphdmEuY2xhc3NGYWN0b3J5LmxvYWRlciA9IGxvYWRlcgogICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CgogICAgICAgICAgICB9CiAgICAgICAgfSwgb25Db21wbGV0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiQ29tcGxldGVkISIpCgogICAgICAgICAgICB2YXIgWGhzSHR0cEludGVyY2VwdG9yID0gSmF2YS51c2UoJ2lzOS5iJyk7IC8vZHM2Lm8sczc3LnQKICAgICAgICAgICAgWGhzSHR0cEludGVyY2VwdG9yLmludGVyY2VwdC5vdmVybG9hZCgnb2todHRwMy5JbnRlcmNlcHRvciRDaGFpbicpLmltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24gKGNoYWluKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzID0gdGhpcy5pbnRlcmNlcHQoY2hhaW4pOwogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBjaGFpbi5yZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICB2YXIgdXJsU3RyaW5nID0gcmVxdWVzdC51cmwoKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgLy8g5Yik5patVVJM5piv5ZCm5YyF5ZCrICcvYXBpL3Nucy92JwogICAgICAgICAgICAgICAgaWYgKHVybFN0cmluZy5pbmNsdWRlcygnL2FwaS9zbnMvdicpICYmIHVybFN0cmluZy5pbmNsdWRlcygnPycpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1xuLS0tLS0tLS0tLS0tLS0tLS0tLS3or7fmsYLmnaXkuoYtLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLnvZHlnYDvvJoiLCB1cmxTdHJpbmcpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlxu6K+35rGC5aS077yaIiwgcmVxdWVzdC5oZWFkZXJzKCkpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlxu5Y+R6YCB5pWw5o2uIikKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAidXJsIjogdXJsU3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAiaGVhZGVycyI6IHJlcXVlc3QuaGVhZGVycygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZW1pdCgicmVwb3J0X2RhdGEiLCBKU09OLnN0cmluZ2lmeShkYXRhKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgfSkKICAgIC8vIOiOt+WPluebruagh+exu+W8leeUqO+8iOazqOaEj+WMheWQjeWSjOexu+WQjemcgOS4juWunumZheWujOWFqOS4gOiHtO+8iQogICAgcnBjLmV4cG9ydHMgPSB7CiAgICAgICAgY2FsbGE6IGZ1bmN0aW9uIChhcmdzKSB7CiAgICAgICAgICAgIHJldHVybiBwZXJmb3JtUnBjSlZNQ2FsbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBUYXJnZXRDbGFzcyA9IEphdmEudXNlKCdjb20ueGluZ2luLnRpbnkuaW50ZXJuYWwuZDMnKTsKICAgICAgICAgICAgICAgICAgICAvLyDlsIYgYXJncyDovazmjaLkuLogSmF2YSBPYmplY3Qg5pWw57uECiAgICAgICAgICAgICAgICAgICAgdmFyIGphdmFTdHJpbmdDbGFzcyA9IEphdmEudXNlKCdqYXZhLmxhbmcuU3RyaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnZlcnRlZEFyZ3MgPSBhcmdzLm1hcCgoYXJnLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDQgJiYgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWwhuesrOS6lOS4quWPguaVsOi9rOaNouS4uiBieXRlW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdCeXRlQXJyYXkgPSBzdHJpbmdUb0J5dGVBcnJheShhcmcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnID8gbmV3Qnl0ZUFycmF5IDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gamF2YVN0cmluZ0NsYXNzLiRuZXcoYXJnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgT2JqZWN0QXJyYXkgPSBKYXZhLmFycmF5KCdqYXZhLmxhbmcuT2JqZWN0JywgY29udmVydGVkQXJncyk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIltPYmplY3RBcnJheV06ICIgKyBPYmplY3RBcnJheSkKICAgICAgICAgICAgICAgICAgICAvLyDmiZPljbDml6Xlv5fvvIjlj6/pgInvvIznlKjkuo7osIPor5XvvIkKICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBUYXJnZXRDbGFzcy5iKC0xNjA1NjQxNDg1LCBPYmplY3RBcnJheSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlsqXSDmlrnms5Xov5Tlm546ICIgKyByZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiWyFdIFJQQyDosIPnlKjlvILluLg6ICIgKyBlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoaXN0b3J5OiBmdW5jdGlvbiAobm90ZUlkcykgewogICAgICAgICAgICByZXR1cm4gcGVyZm9ybVJwY0pWTUNhbGwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBEMSA9IEphdmEudXNlKCJ0MjcuZDEiKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBDID0gSmF2YS51c2UoInBuNS5jIik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgQXJyYXlMaXN0ID0gSmF2YS51c2UoImphdmEudXRpbC5BcnJheUxpc3QiKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBPYnNlcnZhYmxlID0gSmF2YS51c2UoImlvLnJlYWN0aXZleC5PYnNlcnZhYmxlIik7CgogICAgICAgICAgICAgICAgICAgIC8vIOaehOmAoCBsaXN0CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdCA9IEFycmF5TGlzdC4kbmV3KCk7CiAgICAgICAgICAgICAgICAgICAgbm90ZUlkcy5mb3JFYWNoKGlkID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY09iaiA9IEMuJG5ldygiIiwgaWQsIDAsICIiLCAiIiwgIiIsICIiKTsgLy8g5p6E6YCgIG5sNS5jKFN0cmluZyBub3RlSWQpCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuYWRkKGNPYmopOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxpc3QpCiAgICAgICAgICAgICAgICAgICAgLy8g5Yib5bu6IGQxIOWunuS+i++8iOWmguaenOaYr+WNleS+i+WPr+ebtOaOpSBKYXZhLnVzZSDosIPnlKjvvIkKICAgICAgICAgICAgICAgICAgICBjb25zdCBkMUluc3RhbmNlID0gRDEuJG5ldygpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGQxSW5zdGFuY2UpCgogICAgICAgICAgICAgICAgICAgIC8vIC8vIOiwg+eUqCBlKGxpc3QpCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2YWJsZSA9IGQxSW5zdGFuY2UuZShsaXN0KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gT2JzZXJ2YWJsZS5ibG9ja2luZ0ZpcnN0LmNhbGwob2JzZXJ2YWJsZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlsrXSBSZXN1bHQgSlNPTjoiLCBkYXRhKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBHc29uID0gSmF2YS51c2UoImNvbS5nb29nbGUuZ3Nvbi5Hc29uIik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3NvbiA9IEdzb24uJG5ldygpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25TdHIgPSBnc29uLnIoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlsrXSBSZXN1bHQganNvblN0cjoiLCBqc29uU3RyKTsKICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgIHJldHVybiBqc29uU3RyCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlshXSBSUEMg6LCD55So5byC5bi4OiAiICsgZS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0KfSwgMTUwMCkK"
emit: "http://192.168.124.5:8002/rpc/loginUpload"
encode: "none"
standup: 5
spawn: true